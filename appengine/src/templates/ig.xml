<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="Rhizosphere"
               title_url="https://sites.google.com/site/rhizosphereui/"
               description="A visual data browser to navigate trough your informations and filter them easily"
               author="Riccardo Govoni"
               author_email="battlehorse+rhizosphere@google.com"
               screenshot="{{ hostname }}/static/shared/img/rhizosphere_screenshot.png"
               thumbnail="{{ hostname }}/static/shared/img/rhizosphere_logo.png"
    >
  </ModulePrefs>
  <UserPref name="_table_query_url" display_name="Data source URL" required="true"/>
  <UserPref name="useAnims" display_name="Fancy animations" required="true" datatype="bool" default_value="false" />
  <UserPref name="arDefaults" display_name="Autoanalyze data:" required="false" datatype="bool" default_value="false" />
  <UserPref name="arNumFields" display_name="When fullscreen, show" required="false" datatype="enum" default_value="3" >
    <EnumValue value="1" display_value="1 field" />
    <EnumValue value="2" display_value="2 fields" />
    <EnumValue value="3" display_value="3 fields" />
    <EnumValue value="4" display_value="4 fields" />
    <EnumValue value="5" display_value="5 fields" />
    <EnumValue value="6" display_value="6 fields" />
    <EnumValue value="7" display_value="7 fields" />
  </UserPref>
  <UserPref name="arMaster" display_name="Advanced: as Label, use" required="false" datatype="string" />
  <UserPref name="arSize" display_name="Advanced: as Size, use" required="false" datatype="string" />
  <UserPref name="arColor" display_name="Advanced: as Color, use" required="false" datatype="string" />
  <Content type="html" view="home,profile,canvas,default"><![CDATA[
    <link rel="stylesheet" href="{{ hostname }}/static/shared/stylesheets/jquery-ui-1.7.custom.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="{{ hostname }}/static/src/stylesheets/rhizo.css" type="text/css" media="screen" charset="utf-8">

    <div id="rhizo-pangea">
    </div>
    <!-- Scripts section -->

    <!-- for the GViz loader -->
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>

    <!-- JQuery specific libraries -->
    <script src="{{ hostname }}/static/shared/js/jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/shared/js/jquery-ui-1.8.4.custom.min.js" type="text/javascript" charset="utf-8"></script>

    <!-- Rhizosphere libraries -->
    <script src="{{ hostname }}/static/src/js/rhizo.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.log.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.base.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.meta.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/extra/rhizo.meta.extra.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.layout.shared.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.layout.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.layout.tree.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.layout.treemap.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.model.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.model.loader.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.autorender.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.gviz.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.ui.js" type="text/javascript" charset="utf-8"></script>

    <script src="{{ hostname }}/static/src/js/rhizo.ui.gui.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.ui.component.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ hostname }}/static/src/js/rhizo.bootstrap.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" >

      var prefs = new _IG_Prefs();
      var globalOptions = {
        autoSize: true,
        noAnims: !prefs.getBool('useAnims'),
        arDefaults: prefs.getBool('arDefaults'),
        arMaster: prefs.getString('arMaster'),
        arSize: prefs.getString('arSize'),
        arColor: prefs.getString('arColor'),
        arNumFields: prefs.getInt('arNumFields'),
        allowSourcesFromUrl: false
      };

      _IG_RegisterOnloadHandler(loadVisualizationAPI);

      function loadVisualizationAPI() {
          google.load('visualization', '1');
          google.setOnLoadCallback(vizLoaded_);
      }

      function vizLoaded_() {
        $(document).ready(function() {
          var bootstrapper = new rhizo.bootstrap.Bootstrap(
              $('#rhizo-pangea'), globalOptions);
          bootstrapper.go(rhizo.model.loader.GoogleGadget.RESOURCE);
        });
      }
    </script>
    ]]>
 </Content>
</Module>
