/*
  Copyright 2010 The Rhizosphere Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
// -*- mode: CSS;-*-

/******************
  LESS Colors
 *****************/

/* Background colors */
@primary-chrome: #6391de;
@secondary-chrome: #426dc9;
@dark-secondary-chrome: @secondary-chrome - #333;
@alternate-primary-chrome: #8fd19e;

@background: #fff;
@secondary-background: #ebeff9;

@dark-background: @background - #444;
@dark-secondary-background: @secondary-background - #111;

@alternate-secondary-background: #d9f2db;
@dark-alternate-secondary-background: @alternate-secondary-background - #111;

@warning-background: #FE8;

/* Controls */
@primary-control: #2e4987;
@secondary-control: #6a7eac;
@inverted-control: #fff;

/* Links */
@primary-link: #20c;
@secondary-link: #78c;

/* Fonts */
@bold-text: #000;
@normal-text: #222;
@secondary-text: #888;
@attention-text: #080;
@primary-chrome-text: #fff;

/* Selection */
@selection-background: #F796FF;
@selection-border: #7E18AC;

/* Derived colors for Rhizosphere specific entities */
@model-background: @background;
@border-color: @primary-chrome;
@font-logo-color: @secondary-chrome;
@font-action-dropped-color: @secondary-link;

@keyboard-background: @background;
@keyboard-border-color: @dark-background;

/******************
  LESS mixins
 *****************/

.gradient (@fromcolor, @tocolor) {
  background-color: @fromcolor;
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(@fromcolor), to(@tocolor));
  background-image: -moz-linear-gradient(-90deg, @fromcolor, @tocolor);
}

.horgradient (@fromcolor, @tocolor) {
  background-color: @fromcolor;
  background-image: -webkit-gradient(linear, 0 0, 100% 0, from(@fromcolor), to(@tocolor));
  background-image: -moz-linear-gradient(@fromcolor, @tocolor);
}


.importantgradient(@fromcolor, @tocolor) {
  background-color: @fromcolor !important;
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(@fromcolor), to(@tocolor)) !important;
  background-image: -moz-linear-gradient(-90deg, @fromcolor, @tocolor) !important;
}

.shadow(@dx, @dy, @blur, @color) {
  -webkit-box-shadow: @dx @dy @blur @color;
  -moz-box-shadow: @dx @dy @blur @color;
  box-shadow: @dx @dy @blur @color;
}

.noshadow {
  -webkit-box-shadow: 0 0 0;
  -moz-box-shadow: 0 0 0;
  box-shadow: 0 0 0;
}

.rounded_corners(@radius) {
  -moz-border-radius: @radius;
  border-radius: @radius;
}

/******************
  Global settings
 *****************/
.rhizo {
  color: @normal-text;
  font-size: 0.8em;
  overflow: hidden;
}

.rhizo.rhizo-device-ipad {
  font-size: 0.9em;
}

/* Manual tweak on jQuery UI styles, otherwise rhizo-viewport looks funny while
   dragging is in progress. */
.rhizo .ui-state-disabled {
  opacity: 1; filter:Alpha(Opacity=1);
}

/* jQuery UI selectable helper is created outside the .rhizo container, so we need
   this tweak to make it visible. */
.ui-selectable-helper { position: absolute; z-index: 100; border:1px dotted black; }

.rhizo A, .rhizo A:visited {
  color: @primary-link;
}

/******************
  Section headers
 *****************/
.rhizo-section-header {
  font-variant: small-caps;
  text-align: center;
  font-size: 1.3em;
  font-weight: bold;
  padding-bottom: 2px;
  margin: 5px 0 4px 0;
  border-top: 1px solid @border-color;
  .gradient(@primary-chrome, @secondary-chrome);
  color: @primary-chrome-text;
  .shadow(0, 2px, 5px, @dark-background);
}

.rhizo-bottom-bar .rhizo-section-header {
  border-width: 0;
  background-color: transparent;
  background-image: none;
  font-variant: normal;
  padding: 4px 5px;
  margin: 0;
  height: 1.5em;
  display: inline;
  .noshadow;
}

.rhizo-bottom-bar .rhizo-section-header:hover {
  .gradient(@secondary-chrome, @dark-secondary-chrome);
}

/* When inside a bottom-bar */
.rhizo-bottom-bar .rhizo-section-header A {
  color: @primary-chrome-text;
  text-decoration: none;
}

.rhizo-bottom-bar .rhizo-section-header A:hover {
  color: @primary-chrome-text;
}

.rhizo-bottom-bar .rhizo-section-open,
.rhizo-bottom-bar .rhizo-section-open:hover {
  .importantgradient(@dark-secondary-chrome, @secondary-chrome);
}

/******************
  Panels
 *****************/
.rhizo-left {
  position: absolute;
  background-color: @background;
  background-image: -webkit-gradient(linear, 0 0, 50 100, from(@secondary-background), to(@background));
  background-image: -moz-linear-gradient(-45deg, @secondary-background, @background);
  left: 0;
  top: 0;
  bottom: 0;
  width: 295px;
  border-right: 1px solid @border-color;
  .shadow(0, 1px, 5px, @dark-secondary-chrome);
  z-index: 300;
}

.rhizo-right {
  position: absolute;
  top: 0;
  right: 5px;
  width: 120px;
  height: 98%;
  z-index: 300;
}

.rhizo-right-pop {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 5px;
  border-left: 1px solid @border-color;
  background-color: @background;
  color: @primary-control;
  padding: 50% 0;
  z-index:300;
}

.rhizo-right-pop:hover {
  .horgradient(@primary-chrome, @secondary-chrome);
  color: @primary-chrome-text;
}

.rhizo-bottom-bar {
  position: absolute;
  bottom: 0;
  z-index: 1300;
  .gradient(@primary-chrome, @secondary-chrome);
  .shadow(0, -1px, 5px, @dark-secondary-chrome);
  margin: 0;
  padding: 4px 0;
  height: 1.5em;
  width: 100%;
}

/******************
  Floating Panels
 *****************/
.rhizo-floating-panel {
  position: absolute;
  border-top: 1px solid @border-color;
  border-bottom: 1px solid @border-color;
  background-color: @background;
  bottom: 2.4em;
  left: 0px;
  height: 6em;
  width: 100%;
  padding: 5px 0;
  margin: 0;
  font-weight: normal;
  z-index: 1100;
}

/******************
  Viewport, universe and layout-related tweaks
 *****************/
.rhizo-viewport {
  position: absolute;
  .gradient(@secondary-background, @dark-secondary-background);
  top: 0;
  left: 295px;
  right: 5px;
  bottom: 0;
  overflow: hidden;
}

.rhizo-universe {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
/*  border: 1px dotted #000;*/ /* uncomment this to debug endless desktop */
}

.rhizo-bucket-header {
  font-size: 1.3em;
  font-weight: bold;
  border-bottom: 1px solid @secondary-chrome;
  width: 200px;
  margin-bottom: 5px;
  color: @primary-chrome;
  cursor: pointer;
}

.rhizo-tree-connector {
  background-color: @primary-chrome;
}

/******************
  Progress bar
 *****************/
.rhizo-progressbar-panel {
  position: absolute;
  z-index: 5000;
  .shadow(5px, 5px, 5px, @dark-secondary-background);
  width: 300px;
  height: 100px;
  border: 1px solid @border-color;
  background-color: #fff;
}

.rhizo-progressbar {
  margin: 5px 10px;
}

.rhizo-progressbar-text {
  text-align: center;
  color: @normal-text;
  margin-bottom: 5px;
}

/******************
  Logo section
 *****************/
.rhizo-logo {
  padding: 0;
  text-align: center;
}

.rhizo-left .rhizo-logo {
  padding-left: 5px;
}

.rhizo-logo H1 {
  font-size: 1.5em;
  margin: 0;
  padding: 0;
  color: @font-logo-color;
  cursor: pointer;
}

.rhizo-logo H1:hover {
  text-decoration: underline;
}

.rhizo-logo P {
  margin: 0;
  padding: 0;
  display: none
}

/* When inside a floating panel */
.rhizo-floating-panel.rhizo-logo P {
  display: block;
}

.rhizo-floating-panel.rhizo-logo H1 {
  cursor: auto;
  padding-top: 0.5em;
}

/******************
  Layout controls, and related tweaks
 *****************/
.rhizo-layout-control {
  white-space: nowrap;
}

.rhizo-layout-control LABEL {
  min-width: 5em;
  display: inline-block;
}

/* When inside a floating panel */
.rhizo-floating-panel .rhizo-layout-extra-options {
  margin-top: 3px;
}

.rhizo-floating-panel .rhizo-layout-control {
  display: inline-block;
  margin-right: 0.3em;
}

.rhizo-floating-panel .rhizo-layout-control LABEL {
  min-width: 0;
}

/******************
  Filters, and related tweaks
 *****************/
.rhizo-filter {
  padding: 4px 0 5px 5px;
  border-bottom: 1px solid @dark-background;
  clear: both;
}

.rhizo-filter-container .rhizo-filter SELECT {
  max-width: 250px;
}

.rhizo-filter-selector {
  width: 100%;
}

.rhizo-slider-moving {
  background-color: @warning-background;
  .rounded_corners(3px);
}

.rhizo-slider-label {
  font-weight: bold;
}

.rhizo-slider  {
  margin: 5px 30px 0 5px;
}

/* When inside a floating panel */
.rhizo-floating-panel .rhizo-slider {
  margin-right: 5px;
}

.rhizo-floating-panel .rhizo-filter {
  margin-top: 0;
  padding: 0 4px;
  border: 0;
  /* width/height are necessary for safari, otherwise it clips rendering */
  height: 100%;
  width: 80%;
  clear: left;
}

.rhizo-floating-panel.rhizo-filter-container {
  overflow: hidden;
}

.rhizo-floating-panel.rhizo-filter-container .rhizo-filter SELECT {
  max-height: 190px;
}

.rhizo-floating-panel .rhizo-next-filter,
.rhizo-floating-panel .rhizo-prev-filter {
  float: right;
  .rounded_corners(2px);
  border: 1px solid @secondary-control;
  color: @secondary-control;
  background-color: @background;
  font-weight: bold;
  font-size: 1.2em;
  text-align: center;
  margin-right: 5px;
  padding: 0.1em 0.3em;
  .shadow(1px, 1px, 2px, @dark-background);
}

.rhizo-floating-panel .rhizo-next-filter:hover,
.rhizo-floating-panel .rhizo-prev-filter:hover {
  background-color: @secondary-control;
  color: @inverted-control;
  cursor: pointer;
}

/* When inside a touch (iPad) device */
.rhizo-device-ipad .rhizo-next-filter {
  float: right;
  font-size: 2em;
  padding-top: 1em;
  height: 1.9em;
}

.rhizo-device-ipad .rhizo-prev-filter {
  float: left;
  font-size: 2em;
  padding-top: 1em;
  height: 1.9em;
  margin-right: 0;
  margin-left: 5px;
}

.rhizo-device-ipad .rhizo-filter {
  position: absolute;
  left: 3em;
}

/******************
  Filter autocommit selector
 *****************/
.rhizo-autocommit-panel {
  .gradient(@secondary-background, @dark-secondary-background);
  padding: 2px 0;
  margin: 0 0 4px 0;
  height: 2.5em;
  .shadow(0, 2px, 5px, @dark-background);
}

.rhizo-autocommit-panel BUTTON {
  float: right;
}

/* When inside a floating panel */
.rhizo-floating-panel .rhizo-autocommit-panel {
  background-color: transparent;
  background-image: none;
  .noshadow;
}

.rhizo-floating-panel .rhizo-autocommit-panel BUTTON {
  float: none;
  margin: 0 5px;
}

.rhizo-floating-panel .rhizo-autocommit-link {
  float: right;
  margin-right: 5px;
  text-decoration: none;
  color: @secondary-control;
  font-size: 1.1em;
  padding-top: 0.1em;
}

.rhizo-floating-panel .rhizo-autocommit-link:hover {
  color: @primary-control;
  text-decoration: underline;
}

.rhizo-device-ipad .rhizo-autocommit-link {
  .rounded_corners(2px);
  height: 3.2em;
  padding: 2.2em 0.5em 0 0.5em;
  border: 1px solid @secondary-control;
  color: @secondary-control;
  background-color: @background;
  .shadow(1px, 1px, 2px, @dark-background);
}

.rhizo-device-ipad .rhizo-autocommit-link:hover {
  text-decoration: none;
  background-color: @secondary-control;
  color: @inverted-control;
}

/******************
  Selection management
 *****************/
.rhizo DIV.ui-selecting {
  background-color: @selection-background;
  border-color: @selection-border;
}

.rhizo DIV.ui-selected {
  background-color: @selection-background;
  border-color: @selection-border;
  border-width: 2px;
}

.rhizo-selection-trigger {
  position: absolute;
  bottom: 0;
  right: 0;
  border: 1px dashed @primary-control;
  width: 16px;
  height: 16px;
  cursor: pointer;
  z-index: 1000;
  background-color: rgba(255, 255, 255, 0.4);
}

.rhizo-selection-trigger:hover {
  width: 32px;
  height: 32px;
  -webkit-property: width, height;
  -moz-transition-property: width, height;
  -o-transition-property: width, height;
  -webkit-transition-timing-function: ease-in-out;
  -moz-transition-timing-function: ease-in-out;
  -o-transition-timing-function: ease-in-out;
  -webkit-transition-duration: 0.3s;
  -moz-transition-duration: 0.3s;
  -o-transition-duration: 0.3s;
}

.rhizo-device-ipad .rhizo-selection-trigger {
  width: 20px;
  height: 20px;
}

.rhizo-selection-trigger:hover {
  background-color: @warning-background;
  cursor: pointer;
}

.rhizo-selection-mode .rhizo-selection-trigger {
  background-color: @warning-background;
}

.rhizo-viewport.rhizo-selection-mode {
  .importantgradient(@alternate-secondary-background, @dark-alternate-secondary-background);
  cursor: crosshair !important;
}

/******************
  Actions
 *****************/
.rhizo-actions {
  margin-top: 5px;
}

.rhizo-action {
  border: 1px solid @border-color;
  .rounded_corners(3px);
  margin-top: 5px;
  background-color: @model-background;
  height: 40px;
  padding-top: 20px;
  text-align: center;
}

.rhizo-action:hover {
  cursor: pointer;
}

.rhizo-droppable-action {
  border: 1px solid @border-color;
  .rounded_corners(3px);
  background-color: @model-background;
  width: 200px;
  height: 200px;
  color: @font-action-dropped-color;
  position: absolute;
  opacity: 0;
  visibility: hidden;
  .shadow(1px, 1px, 2px, @dark-secondary-background);
}

/******************
  Console
 *****************/
.rhizo-console-header {
  border: 1px solid @border-color;
  border-top: 0px;
  min-height: 20px;
  padding: 3px 0 0 5px;
  font-variant: small-caps;
  background-color: @background;
}

.rhizo-console-close {
  float: right;
  border: 2px solid @border-color;
  font-family: sans-serif;
  color: @primary-link;
  width: 12px;
  height: 12px;
  margin-right: 2px;
  text-align: center;
}

.rhizo-console-close:hover {
  cursor: pointer;
}

.rhizo-console-contents {
  border: 1px solid @border-color;
  border-top-width: 0px;
  font-size: 0.9em;
  height: 400px;
  overflow: hidden;
  background-color: @secondary-background;
  clear: right;
  display: none;
}

.rhizo-console-contents P {
  margin: 1px 0;
  padding: 0;
}

.rhizo-console-contents P.rhizo-log-error {
  background-color: #ff9999;
}

.rhizo-console-contents P.rhizo-log-warning {
  background-color: #ffff99;
}

/******************
  Icons
 *****************/
 .rhizo-icon {
  display: inline-block;
  border: 1px solid @primary-control;
  width: 14px;
  height: 14px;
  .rounded_corners(2px);
  margin-right: 0.2em;
  vertical-align: top;
  text-align: center;
  font-weight: bold
}

.rhizo-icon:hover {
  border-color: @secondary-control;
  cursor: pointer;
  background-color: rgba(255, 255, 255, 0.8);
}

.rhizo-icon.rhizo-maximize-icon {
  height: 10px;
  border-top-width: 4px;
}

.rhizo-icon.rhizo-close-icon {
  float: right;
  margin-right: 2px;
}

.rhizo-icon.rhizo-close-icon:hover {
  border-color: @primary-control;
  background-color: @secondary-control;
  color: @inverted-control;
  cursor: pointer;
}

.rhizo-bottom-bar .rhizo-icon {
  border-color: @primary-chrome-text;
  position: absolute;
  right: 5px;
}

.rhizo-bottom-bar .rhizo-icon:hover {
  background-color: rgba(255, 255, 255, 0.2);
  border-color: @primary-chrome-text;
}

/* When inside a touch (iPad) device */
.rhizo-device-ipad .rhizo-icon {
  width: 19px;
  height: 19px;
  margin: 0.4em;
  margin-right: 0.6em;
  font-size: 1.1em;
}

.rhizo-device-ipad .rhizo-icon.rhizo-maximize-icon {
  height: 14px;
  border-top-width: 5px;
}

/******************
  Model rendering
 *****************/
.rhizo-expand-model {
  background-color: rgba(255, 255, 255, 0.6);
  position: absolute;
  visibility: hidden;
  top: 2px;
  right: 2px;
}

.rhizo-expand-model:hover {
  border-color: @secondary-control;
}

.rhizo-device-ipad .ui-selected .rhizo-expand-model {
  visibility: visible !important;
  opacity: 0.6;
}

/* Note: if you alter this class borders, margins and paddings, you also
   have to fix the assumptions in rhizo.ui.Rendering.rescaleRendering. */
.rhizo-model {
  border: 1px solid @border-color;
  .rounded_corners(3px);
  background-color: @model-background;
  margin: 0;
  padding: 0;
  cursor: pointer;
  overflow: hidden;
  position: absolute;
  .shadow(1px, 1px, 2px, @dark-secondary-background);

  /* Changes the rhizo.ui.Elevation offset if you change this value. */
  z-index: 50;

  /* Models are hidden/show using 'visibility' rather than 'display' to be able
     to compute their offsetWidth / offsetHeight even when hidden. */
  visibility: hidden;
  opacity: 0;
}

/******************
  Autorendering and Legend
 *****************/
.rhizo-autorender {
  color: @normal-text;
  width: 100%;
  height: 100%;
}

.rhizo-autorender .rhizo-autorender-label {
  color: @secondary-text;
  font-size: 0.9em;
}

.rhizo-autorender P {
  margin: 0;
  padding: 0;
}

.rhizo-legend-size {
  margin-bottom: 5px;
}

.rhizo-legend-color {
  margin-bottom: 5px;
}

.ar-fon-0m { font-weight: bold; font-size: 0.9em;}
.ar-fon-1m { font-weight: bold; font-size: 1em;}
.ar-fon-2m { font-weight: bold; font-size: 1.2em;}
.ar-fon-3m { font-weight: bold; font-size: 1.4em;}
.ar-fon-4m { font-weight: bold; font-size: 1.6em;}
.ar-fon-5m { font-weight: bold; font-size: 1.8em;}

.ar-fon-0 { font-weight: bold; font-size: 1em;}
.ar-fon-1 { font-weight: bold; font-size: 1.2em;}
.ar-fon-2 { font-weight: bold; font-size: 1.4em;}
.ar-fon-3 { font-weight: bold; font-size: 1.6em;}
.ar-fon-4 { font-weight: bold; font-size: 1.8em;}
.ar-fon-5 { font-weight: bold; font-size: 2em;}

.ar-col-0m, .ar-col-0 { padding: 3px; background-color: #fff;}
.ar-col-1m, .ar-col-1 { padding: 3px; background-color: #F9FCCA;}
.ar-col-2m, .ar-col-2 { padding: 3px; background-color: #E7FCCA;}
.ar-col-3m, .ar-col-3 { padding: 3px; background-color: #D5FCCA;}
.ar-col-4m, .ar-col-4 { padding: 3px; background-color: #C3FCCA;}
.ar-col-5m, .ar-col-5 { padding: 3px; background-color: #B1FCCA;}

.ar-col-legend {
  border: 1px solid @border-color;
}

/***************************
  Broadcasting component
***************************/
.rhizo-broadcast P {
  margin-top: 0;
  margin-left: 0;
  margin-right: 0;
  vertical-align: middle;
}

.rhizo-broadcast BUTTON {
  float: right;
}

.rhizo-broadcast-url {
  font-size: 0.9em;
  width: 19em;
  display: none;
}

/***************************
  Bottom template tweaks
***************************/

/* Viewport, universe and layout-related tweaks */
.rhizo-template-bottom .rhizo-viewport {
  left: 0;
  right: 0;
}

.rhizo-template-bottom .rhizo-bucket-header {
  font-size: 1.2em;
  margin-bottom: 3px;
  width: 160px;
}

/* Selection management */
.rhizo-template-bottom .rhizo-selection-trigger {
  top: 0;
}

/***************************
  Onscreen Keyboard
***************************/

.rhizo-keyboard {
    border: solid 2px @keyboard-border-color;
    padding: 5px;
    position: absolute;
    left: 100px;
    top: 100px;
    .rounded_corners(15px);
    background: @keyboard-background;
    opacity: 0.8 !important;
    width: 670px;
    height: 250px;
    display: none;
    z-index: 11000;
}
